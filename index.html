<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
<div class="title">Case Converter</div>
<textarea></textarea>
<button id="upper-case"></button>
<button id="lower-case"></button>
<button id="proper-case">fff</button>
<button id="sentence-case"></button>
<button id="save-text-file"></button>
<script>
    document.getElementById("upper-case").addEventListener("click", function() {
        let ta = document.querySelector('textarea')
        ta.value = ta.value.toUpperCase()
    })
    document.getElementById("lower-case").addEventListener("click", function() {
        let ta = document.querySelector('textarea')
        ta.value = ta.value.toLowerCase()
    })
    document.getElementById("proper-case").addEventListener("click", function() {
        let ta = document.querySelector('textarea')
        let work_text = ta.value.split(" ")
        for (let i=0; i<work_text.length; i+=1) {
            work_text[i] = work_text[i].toLowerCase()
            work_text[i] = work_text[i].charAt(0).toUpperCase() + work_text[i].slice(1)
        }
        ta.value = work_text.join(' ')
    })
    document.getElementById("sentence-case").addEventListener("click", function() {
        let ta = document.querySelector('textarea')
        let work_text = ta.value.split(". ")
        for (let i=0; i<work_text.length; i+=1) {
            work_text[i] = work_text[i].toLowerCase()
            work_text[i] = work_text[i].charAt(0).toUpperCase() + work_text[i].slice(1)
        }
        ta.value = work_text.join('. ')
    })

    document.getElementById("save-text-file").addEventListener("click", function() {
        let ta = document.querySelector('textarea')
        download("text.txt", ta.value)
    })
    function download(filename, text) {
        let element = document.createElement('a');
        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
        element.setAttribute('download', filename);

        element.style.display = 'none';
        document.body.appendChild(element);

        element.click();

        document.body.removeChild(element);
    }
</script>
</body>
</html>